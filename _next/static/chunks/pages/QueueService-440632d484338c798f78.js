_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[65],{PH1p:function(e,t,a){"use strict";a.r(t),a.d(t,"openNotification",(function(){return V}));var n=a("vJKn"),o=a.n(n),i=a("rg98"),s=a("H+61"),c=a("UlJF"),u=a("+Css"),r=a("7LId"),l=a("VIvw"),d=a("iHvq"),f=a("cpVT"),p=a("q1tI"),m=a.n(p),h=(a("g4pe"),a("20a2")),E=a.n(h),g=a("2fM7"),v=a("gK9i"),b=a("TeRw"),y=a("PArb"),Q=a("CtXQ"),D=a("BMrR"),S=a("kPKH"),U=a("NJEC"),M=a("mr32"),C=a("W9HT"),O=a("ECub"),w=a("WM+0"),T=a("VlGh"),A=a("xtEs"),x=a("mOvS"),k=a.n(x),H=a("Y0NT"),R=a("/MKj"),I=a("Z3vd"),N=a("MoW8"),Y=a("fH4n"),j=a("9kay"),B=a("R9gW"),P=a.n(B),L=(a("1rrs"),a("EOgW"),a("wd/R")),q=a.n(L),z=a("hQDC"),F=m.a.createElement;function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(Object(a),!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function J(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return Object(l.a)(this,a)}}var X=k()().publicRuntimeConfig,G=g.a.Option,V=(v.a.Panel,function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info";switch(a){case"success":b.a.success({message:F("div",{style:{fontSize:14}},e),description:F("div",{style:{fontSize:14,fontWeight:200}},t),placement:"bottomRight"});break;case"error":b.a.error({message:F("div",{style:{fontSize:14}},e),description:F("div",{style:{fontSize:14,fontWeight:200}},t),placement:"bottomRight"});break;case"warning":b.a.warning({message:F("div",{style:{fontSize:14}},e),description:F("div",{style:{fontSize:14,fontWeight:200}},t),placement:"bottomRight"});break;default:b.a.info({message:F("div",{style:{fontSize:14}},e),description:F("div",{style:{fontSize:14,fontWeight:200}},t),placement:"bottomRight"})}}),Z=function(e){Object(r.a)(a,e);var t=J(a);function a(e){var n;return Object(s.a)(this,a),n=t.call(this,e),Object(f.a)(Object(u.a)(n),"onCancelQueue",function(){var e=Object(i.a)(o.a.mark((function e(t,a){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({loadingBook:!0}),i={queue_id:t,queuedt_id:a,menu_component:"QueueService"},w.a.cancelBookQueue(i).then((function(e){if("Network Error"==e.message)throw"networkError";e.RESULT?(n.setState({isConfirmQueue:!1,loadingBook:!1}),V(Y.a.t("SuccessCancelBooking"),Y.a.t("SuccessCancelBookingDetail"),"success"),n.fetchAllQueueDate(),n.fetchMemberQueue()):(n.fetchAllQueueDate(),n.setState({loadingBook:!1,isConfirmQueue:!1}),n.setState(K({},n.props.checkResultFalseMessage(e))))})).catch((function(e){n.setState({loadingBook:!1,isConfirmQueue:!1}),n.setState(K({},n.props.checkCatchMessage(e)))}));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Object(f.a)(Object(u.a)(n),"onBookQueue",function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({loadingBook:!0}),a={queue_id:t,menu_component:"QueueService"},w.a.bookQueue(a).then((function(e){if("Network Error"==e.message)throw"networkError";e.RESULT?(n.setState({isConfirmQueue:!1,loadingBook:!1}),V(Y.a.t("SuccessBooking"),Y.a.t("SuccessBookingDetail"),"success"),n.fetchAllQueueDate(),n.fetchMemberQueue()):(n.fetchAllQueueDate(),n.setState({loadingBook:!1,isConfirmQueue:!1}),n.setState(K({},n.props.checkResultFalseMessage(e))))})).catch((function(e){n.setState({loadingBook:!1,isConfirmQueue:!1}),n.setState(K({},n.props.checkCatchMessage(e)))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(f.a)(Object(u.a)(n),"fetchMemberQueue",(function(){n.setState({loadingMemberQueue:!0});w.a.fetchMemberQueue({menu_component:"QueueService"}).then((function(e){e&&e.RESULT&&n.setState({memberQueue:e.MEMBER_QUEUE||[],isCanCancel:!!e.IS_CAN_CANCEL}),n.setState({loadingMemberQueue:!1,loadedMemberQueue:!0})})).catch((function(e){n.setState({loadingMemberQueue:!1,loadedMemberQueue:!0}),n.setState(K({},n.props.checkCatchMessage(e)))}))})),Object(f.a)(Object(u.a)(n),"fetchAllQueueDate",(function(){n.setState({loading:!0});var e={menu_component:"QueueService",coop_branch_id:n.state.coop_branch_selected};w.a.fetchAllQueueDate(e).then((function(e){if(e&&e.RESULT){var t=[],a=[],o=[];e.QUEUES_DATE.map((function(e,n){new Date(e.QUEUE_DATE)<=new Date?t.push(new Date(e.QUEUE_DATE)):e.REMAIN_QUEUE>0?a.push(new Date(e.QUEUE_DATE)):o.push(new Date(e.QUEUE_DATE))})),n.setState({pastDays:t,availableDays:a,maxDays:o},(function(){n.fetchQueueMaster()}))}else n.setState({loading:!1,isInitialLoading:!1})})).catch((function(e){n.setState({loading:!1,isInitialLoading:!1}),n.setState(K({},n.props.checkCatchMessage(e)))}))})),Object(f.a)(Object(u.a)(n),"fetchCoopBranch",(function(){n.setState({loading:!0});w.a.fetchCoopBranch({menu_component:"QueueService"}).then((function(e){e&&e.RESULT?n.setState({coop_branch:e.COOP_BRANCH,coop_branch_selected:e.COOP_BRANCH[0].COOP_BRANCH_ID},(function(){n.fetchAllQueueDate()})):n.setState(K({},n.props.checkResultFalseMessage(e,{coop_branch:[],coop_branch_selected:null}))),n.setState({loading:!1})})).catch((function(e){n.setState({loading:!1,isInitialLoading:!1}),n.setState(K({},n.props.checkCatchMessage(e)))}))})),Object(f.a)(Object(u.a)(n),"fetchQueueMaster",(function(){n.setState({loadingQueue:!0});var e={menu_component:"QueueService",queue_date:n.state.queueDate.format("YYYY-MM-DD"),coop_branch_id:n.state.coop_branch_selected};w.a.fetchServiceQueue(e).then((function(e){if(e&&e.RESULT){var t=[];(e.QUEUES_DATA||[]).map((function(e,a){q()().format("HH.mm")<=parseFloat(q()(e.QUEUE_ENDTIME,"HH:mm:ss").format("HH.mm"))&&t.push(a)})),n.setState({serviceQueues:e.QUEUES_DATA||[],activeKey:t})}else n.setState(K({},n.props.checkResultFalseMessage(e,{serviceQueues:[],activeKey:[]})));n.setState({isInitialLoading:!1,loadingQueue:!1})})).catch((function(e){n.setState({isInitialLoading:!1,loadingQueue:!1}),n.setState(K({},n.props.checkCatchMessage(e)))}))})),n.state={statusCode:200,isInitialLoading:!0,errData:null,loading:!0,coop_branch:[],coop_branch_selected:null,queueDate:q()(new Date).add(1,"days"),serviceQueues:[],activeKey:[],pastDays:[],availableDays:[],maxDays:[],loadedMemberQueue:!1,memberQueue:[],isCanCancel:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){q.a.locale(Y.a.language),this.setState({pathName:Object(A.i)(E.a.pathname)}),this.fetchCoopBranch(),this.fetchMemberQueue()}},{key:"render",value:function(){var e,t,a,n,o,i=this,s=this.state,c=s.serviceQueues,u=(s.input_starttime,s.input_endtime,s.isLoadingAddServiceQueue,s.input_maxqueue,s.modalAddServiceQueue,s.coop_branch_selected),r=(s.queueDate,s.input_branch,parseFloat(q()().format("HH.mm")));return this.state.statusCode>=300&&this.state.statusCode<500?F(H.default,{statusCode:this.state.statusCode,err:this.state.errData,showModalLogout:function(){return i.props.showModalLogout()}}):F("div",{className:"main-layout",style:{position:"relative"}},F("div",{style:{width:"100%"}},F(T.a,{checked:!this.state.loading||!this.state.isInitialLoading}),F("div",{className:"main-content",style:{width:"100%"}},F("div",{className:"sub-content"},F(N.a,{th:"\u0e23\u0e31\u0e1a\u0e04\u0e34\u0e27\u0e43\u0e0a\u0e49\u0e1a\u0e23\u0e34\u0e01\u0e32\u0e23",en:"Queue Service"}),F(z.a,{isOpen:this.state.isConfirmQueue,svgIcon:"menu_queueservice",variantIcon:"square",styleIcon:{padding:0,backgroundColor:"transparent"},styleContent:{textAlign:"left",backgroundColor:"white"},title:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19",disableCloseBtn:!0,onClose:function(){i.setState({isConfirmQueue:!1})},loading:this.state.loadingBook,onConfirm:function(){var e;!i.state.loadingBook&&i.onBookQueue(null===(e=i.state.confirmQueueData)||void 0===e?void 0:e.QUEUE_ID)},description:F("div",{style:{paddingTop:8}},F("div",{style:{textAlign:"left"}},"\u0e04\u0e34\u0e27\u0e43\u0e0a\u0e49\u0e1a\u0e23\u0e34\u0e01\u0e32\u0e23 ",F("span",{style:{color:"#3f51b5",fontSize:"1.5em"}},'"',"".concat(null===(e=_.find(this.state.coop_branch,{COOP_BRANCH_ID:this.state.coop_branch_selected}))||void 0===e?void 0:e.COOP_BRANCH_DESC),'"')),F(y.a,{style:{margin:"9px 0"}}),F("div",{style:{display:"flex",textAlign:"left"}},F("div",{style:{whiteSpace:"nowrap",fontSize:"1em"}},F("div",null,": ",this.state.confirmQueueData&&this.state.confirmQueueData.QUEUE_DATE?"".concat(q()(this.state.confirmQueueData.QUEUE_DATE).format("\u0e27\u0e31\u0e19dddd \u0e17\u0e35\u0e48 DD MMM")," ").concat(q()(this.state.confirmQueueData.QUEUE_DATE).format("YYYY")-0+543):null),(null===(t=this.state.confirmQueueData)||void 0===t?void 0:t.QUEUE_STARTTIME)&&(null===(a=this.state.confirmQueueData)||void 0===a?void 0:a.QUEUE_ENDTIME)&&F("div",{style:{paddingTop:4}},F(Q.a,{type:"clock-circle"})," ",q()(null===(n=this.state.confirmQueueData)||void 0===n?void 0:n.QUEUE_STARTTIME,"HH:mm:ss").format("HH.mm")," - ",q()(null===(o=this.state.confirmQueueData)||void 0===o?void 0:o.QUEUE_ENDTIME,"HH:mm:ss").format("HH.mm")," \u0e19."))))}),this.state.memberQueue.length>0&&F("div",null,F("div",null,"\u0e04\u0e34\u0e27\u0e1a\u0e23\u0e34\u0e01\u0e32\u0e23\u0e02\u0e2d\u0e07\u0e17\u0e48\u0e32\u0e19 :"),F("div",{style:{paddingTop:8}},F(D.a,null,this.state.memberQueue.map((function(e,t){return F(S.a,{xxl:8,xl:8,lg:12,md:12,sm:24,xs:24,style:{padding:8}},F("div",null,F("div",{style:{paddingBottom:10,textAlign:"right"}},F(U.a,{title:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01\u0e08\u0e2d\u0e07\u0e04\u0e34\u0e27",okText:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19",cancelText:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",onConfirm:function(){i.onCancelQueue(e.QUEUE_ID,e.QUEUEDT_ID)}},F(I.a,{size:"small",variant:"outlined",color:"secondary"},"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01"))),F("div",{className:"isc-card card-shadow",style:{overflow:"hidden"}},F("div",{style:{display:"flex",flexDirection:"row"}},F("div",{style:{padding:"8px 16px",flex:1}},0==e.QUEUE_STATUS&&F(M.a,{color:"magenta"},"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01\u0e40\u0e40\u0e25\u0e49\u0e27"),F("div",null,"\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e04\u0e34\u0e27\u0e43\u0e0a\u0e49\u0e1a\u0e23\u0e34\u0e01\u0e32\u0e23 ",F("span",{style:{color:"#3f51b5",fontSize:"1.5em",fontWeight:"bold"}},e.COOP_BRANCH_DESC)),F(y.a,{style:{margin:"9px 0"}}),F("div",{style:{display:"flex",textAlign:"left"}},F("div",{style:{whiteSpace:"nowrap",fontSize:"1em"}},F("div",null,": ",e.QUEUE_DATE?"".concat(q()(e.QUEUE_DATE).format("\u0e27\u0e31\u0e19dddd \u0e17\u0e35\u0e48 DD MMM")," ").concat(q()(e.QUEUE_DATE).format("YYYY")-0+543):null),(null===e||void 0===e?void 0:e.QUEUE_STARTTIME)&&(null===e||void 0===e?void 0:e.QUEUE_ENDTIME)&&F("div",{style:{paddingTop:4}},F(Q.a,{type:"clock-circle"})," ",q()(null===e||void 0===e?void 0:e.QUEUE_STARTTIME,"HH:mm:ss").format("HH.mm")," - ",q()(null===e||void 0===e?void 0:e.QUEUE_ENDTIME,"HH:mm:ss").format("HH.mm")," \u0e19.")))),F("div",{style:{display:"flex",justifyContent:"center",alignItems:"flex-start",padding:16,opacity:.6}},F("img",{alt:"menu-icon",src:"".concat(X.svgFolder,"/success_icon.webp"),style:{width:40,height:40}}))))))}))))),F(y.a,null),this.state.memberQueue.length>0?null:F("div",{style:{display:"flex"}},F("div",{style:{paddingBottom:60,flex:1}},F("div",null,F("div",{style:{paddingBottom:20}},F("div",{style:{display:"flex"}},F("div",{className:"isc-card card-shadow",style:{padding:"16px 20px"}},F("div",null,"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2a\u0e32\u0e02\u0e32 :"),F(g.a,{value:u,style:{width:200},placeholder:"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2a\u0e32\u0e02\u0e32",optionFilterProp:"children",onChange:function(e){i.setState({coop_branch_selected:e},(function(){i.fetchAllQueueDate()}))},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.coop_branch.map((function(e,t){return F(G,{value:e.COOP_BRANCH_ID},e.COOP_BRANCH_DESC)})))))),F("div",{className:"isc-card card-shadow",style:{padding:"16px 20px"}},F("div",null,F("div",null,"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48 :"),F("div",{style:{display:"flex"}},F("div",{style:{border:"1px solid",borderRadius:2}},F(P.a,{modifiers:{pastDays:this.state.pastDays,availableDays:this.state.availableDays,maxDays:this.state.maxDays},onDayClick:function(e){i.setState({queueDate:q()(e)},(function(){i.fetchQueueMaster()}))},months:["\u0e21.\u0e04.","\u0e01.\u0e1e.","\u0e21\u0e35.\u0e04.","\u0e40\u0e21.\u0e22.","\u0e1e.\u0e04.","\u0e21\u0e34.\u0e22.","\u0e01.\u0e04.","\u0e2a.\u0e04.","\u0e01.\u0e22.","\u0e15.\u0e04.","\u0e1e.\u0e22.","\u0e18.\u0e04."],weekdaysShort:["\u0e2d\u0e32","\u0e08","\u0e2d","\u0e1e","\u0e1e\u0e24","\u0e28","\u0e2a"],locale:"th"})))),F(y.a,null),F(C.a,{tip:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14...",spinning:this.state.loadingQueue||!this.state.loadedMemberQueue},F("div",null,"\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48 ",q()(this.state.queueDate).format("DD MMM")," ",parseInt(q()(this.state.queueDate).format("YYYY"))+543),F("div",null,c.map((function(e,t){var a=!e.IS_DISABLE&&(!(e.REMAIN_QUEUE<=0||0==e.QUEUE_STATUS)&&(parseInt(q()(i.state.queueDate).format("YYYYMMDD"))==parseInt(q()().format("YYYYMMDD"))?r<=parseFloat(q()(e.QUEUE_ENDTIME,"HH:mm:ss").format("HH.mm"))&&parseInt(q()(i.state.queueDate).format("YYYYMMDD"))==parseInt(q()().format("YYYYMMDD")):parseInt(q()(i.state.queueDate).format("YYYYMMDD"))>parseInt(q()().format("YYYYMMDD"))));return e.IS_HIDE?null:F("div",{onClick:function(){!(e.REMAIN_QUEUE<=0||0==e.QUEUE_STATUS)&&a&&i.setState({isConfirmQueue:!0,confirmQueueData:e})},className:a?"queue-card":"queue-card-disable",style:{padding:"10px 20px",border:"1px solid #999999",marginBottom:2,display:"flex",flexWrap:"wrap-reverse",justifyContent:"space-between"}},F("div",null,F("div",{style:{fontSize:"1.2em",fontWeight:"bold"}},"\u0e23\u0e2d\u0e1a\u0e1a\u0e23\u0e34\u0e01\u0e32\u0e23\u0e17\u0e35\u0e48 ",t+1),F("div",{style:{paddingTop:4}},F(Q.a,{type:"clock-circle"})," \u0e40\u0e27\u0e25\u0e32 ",q()(e.QUEUE_STARTTIME,"HH:mm:ss").format("HH.mm")," - ",q()(e.QUEUE_ENDTIME,"HH:mm:ss").format("HH.mm")," \u0e19."),F("div",{style:{display:"flex",padding:"5px 0"}},F("div",{style:{backgroundColor:"#fafafa",color:"black",padding:5,borderRadius:5,boxShadow:a&&"0px 2px 4px 0px #00000029"}},F("div",null,"\u0e08\u0e33\u0e19\u0e27\u0e19\u0e2a\u0e21\u0e32\u0e0a\u0e34\u0e01 ",F("span",{style:{color:e.REMAIN_QUEUE<=0?"#ff7b54":void 0}},F("span",{style:{fontWeight:"bold"}},e.MAX_QUEUE-e.REMAIN_QUEUE),"/",F("span",{style:{fontWeight:"bold"}},e.MAX_QUEUE))," \u0e04\u0e19")))),F("div",null,e.REMAIN_QUEUE<=0&&F(M.a,{color:"#ff5e78"},"\u0e40\u0e15\u0e47\u0e21\u0e41\u0e25\u0e49\u0e27"),0==e.QUEUE_STATUS&&F(M.a,{color:"magenta"},"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01\u0e40\u0e40\u0e25\u0e49\u0e27"),!!e.ERROR_MSG&&F(M.a,{color:"#1a508b",style:{marginBottom:6}},e.ERROR_MSG)))})),0==c.length&&F("div",{className:"sub-text",style:{textAlign:"center",padding:"10px",fontSize:"small"}},F(O.a,{description:Y.a.t("DataNotFound"),style:{fontSize:"small"},image:F("picture",null,F("source",{srcSet:"".concat(X.imageFolder,"/notfound.webp"),type:"image/webp"}),F("source",{srcSet:"".concat(X.imageFolder,"/notfound.png"),type:"image/png"}),F("img",{alt:"notfound-icon",src:"".concat(X.imageFolder,"/notfound.png"),type:"image/png",style:{userSelect:"none",opacity:.6}}))}))))))))))))}}]),a}(p.PureComponent);t.default=Object(R.b)((function(e){return{}}),(function(e){return{}}))(Object(j.c)()(Z))},xl9b:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/QueueService",function(){return a("PH1p")}])}},[["xl9b",0,2,3,5,8,7,9,1,4,6,10,11,12,20,29]]]);