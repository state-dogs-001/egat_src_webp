(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9001],{12190:function(t,e,s){"use strict";s.r(e);var n=s(11508),a=s(30266),i=s(68216),r=s(25997),o=s(14695),l=s(13444),c=s(30268),u=s(92953),d=s(92809),N=s(809),f=s.n(N),m=s(67294),T=s(9008),p=s(11163),E=s(33330),_=s(11752),h=s(41561),P=s(56956),I=s(71230),U=s(15746),A=s(81096),L=s(54418),g=s(83681),x=s(90656),v=s(38449),Z=s(46507),S=s(43216),j=s(82037),M=s(66253),y=s(9676),H=s(20809),w=s(45360),R=s(70267),C=s(28216),b=s(94141),D=s(30381),F=s.n(D),O=s(13706),k=s(282),Y=s(7734),G=s(96486),q=s.n(G),W=s(58724),V=s(62045),B=s(8801),J=s(85893);function Q(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function X(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(s),!0).forEach((function(e){(0,d.Z)(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Q(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function z(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,n=(0,u.Z)(t);if(e){var a=(0,u.Z)(this).constructor;s=Reflect.construct(n,arguments,a)}else s=n.apply(this,arguments);return(0,c.Z)(this,s)}}var $=(0,_.default)().publicRuntimeConfig;function K(t){return new Promise((function(e,s){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(n.result)},n.onerror=function(t){return s(t)}}))}F().locale("th");var tt=function(t){(0,l.Z)(s,t);var e=z(s);function s(t){var n;return(0,i.Z)(this,s),n=e.call(this,t),(0,d.Z)((0,o.Z)(n),"handleCancel",(function(){return n.setState({previewVisible:!1})})),(0,d.Z)((0,o.Z)(n),"handlePreview",function(){var t=(0,a.Z)(f().mark((function t(e){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,K(e.originFileObj);case 3:e.preview=t.sent;case 4:n.setState({previewImage:e.url||e.preview,previewVisible:!0});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,d.Z)((0,o.Z)(n),"submitFormRequest",(0,a.Z)(f().mark((function t(){var e;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.setState({loadingReq:!0}),e={menu_component:(0,b.tk)(p.default.pathname),id_const_welfare:q().find(n.state.assist_arr,{ID_CONST_WELFARE:n.state.assist}).ID_CONST_WELFARE,assisttype_code:q().find(n.state.assist_arr,{ID_CONST_WELFARE:n.state.assist}).ASSISTTYPE_CODE},n.state.assist_form.map((function(t){"date"==t.INPUT_TYPE&&n.state[t.INPUT_NAME]?e[t.INPUT_NAME]=n.state[t.INPUT_NAME].format("YYYY-MM-DD"):"datetime"==t.INPUT_TYPE&&n.state[t.INPUT_NAME]?e[t.INPUT_NAME]=n.state[t.INPUT_NAME].format("YYYY-MM-DD HH:mm:ss"):"time"==t.INPUT_TYPE&&n.state[t.INPUT_NAME]?e[t.INPUT_NAME]=n.state[t.INPUT_NAME].format("HH:mm"):"checkbox"==t.INPUT_TYPE&&n.state[t.INPUT_NAME]?e[t.INPUT_NAME]=n.state[t.INPUT_NAME].join():"upload"==t.INPUT_TYPE&&n.state[t.INPUT_NAME]?e[t.INPUT_NAME]=n.state[t.INPUT_NAME].map((function(t){return t.preview})):e[t.INPUT_NAME]=n.state[t.INPUT_NAME]}));case 3:case"end":return t.stop()}}),t)})))),(0,d.Z)((0,o.Z)(n),"fetchAssistReqType",(0,a.Z)(f().mark((function t(){var e;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.setState({loading:!0}),e={menu_component:(0,b.tk)(p.default.pathname)},O.Z.fetchAssistReqType(e).then((function(t){t.RESULT?(n.setState({assist_arr:t.WELFARE_TYPE}),t.WELFARE_TYPE.length>0&&n.fetchAssistReqForm(t.WELFARE_TYPE[0].ID_CONST_WELFARE)):n.setState(X({},n.props.checkResultFalseMessage(t,{assist_arr:[]},V.Z.t("WelfareTypeNotFound")))),n.setState({loading:!1,isInitialLoading:!1})})).catch((function(t){n.setState({loading:!1,isInitialLoading:!1}),n.setState(X({},n.props.checkCatchMessage(t)))}));case 3:case"end":return t.stop()}}),t)})))),(0,d.Z)((0,o.Z)(n),"fetchAssistReqForm",function(){var t=(0,a.Z)(f().mark((function t(e){var s;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.setState({loading_form:!0,assist:e}),s={menu_component:(0,b.tk)(p.default.pathname),id_const_welfare:e},O.Z.fetchAssistReqForm(s).then((function(t){t.RESULT?n.setState({assist_form:t.FORM_ASSIST},(function(){n.state.assist_form.map((function(t){"date"==t.INPUT_TYPE?t.DEFAULT_VALUE&&n.setState((0,d.Z)({},t.INPUT_NAME,F()(t.DEFAULT_VALUE))):"time"==t.INPUT_TYPE?t.DEFAULT_VALUE&&n.setState((0,d.Z)({},t.INPUT_NAME,F()(t.DEFAULT_VALUE,"HH:mm"))):"datetime"==t.INPUT_TYPE?t.DEFAULT_VALUE&&n.setState((0,d.Z)({},t.INPUT_NAME,F()(t.DEFAULT_VALUE))):"year"==t.INPUT_TYPE?t.DEFAULT_VALUE&&n.setState((0,d.Z)({},t.INPUT_NAME,F()(t.DEFAULT_VALUE,"YYYY"))):"checkbox"==t.INPUT_TYPE?t.DEFAULT_VALUE&&n.setState((0,d.Z)({},t.INPUT_NAME,t.DEFAULT_VALUE.split(","))):t.DEFAULT_VALUE&&n.setState((0,d.Z)({},t.INPUT_NAME,t.DEFAULT_VALUE))}))})):n.setState(X({},n.props.checkResultFalseMessage(t,{assist_form:[]},V.Z.t("WelfareNotFound")))),n.setState({loading_form:!1})})).catch((function(t){n.setState({loading_form:!1}),n.setState(X({},n.props.checkCatchMessage(t)))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,d.Z)((0,o.Z)(n),"onChangeInput",(function(t){var e;n.setState((e={},(0,d.Z)(e,t.target.name,t.target.value),(0,d.Z)(e,"evalid_".concat(t.target.name),null),e))})),(0,d.Z)((0,o.Z)(n),"onChangeInputRaw",(function(t){var e;n.setState((e={},(0,d.Z)(e,t.target.name,t.target.rawValue),(0,d.Z)(e,"evalid_".concat(t.target.name),null),e))})),n.state={isSuccessAlert:!1,isInitialLoading:!0,statusCode:200,errData:null,loading:!0,notifyOn:0,pathName:"",isConfirm:!1,assist_arr:[],assist_form:[],assist:null},n}return(0,r.Z)(s,[{key:"componentDidMount",value:function(){this.setState({pathName:(0,b.tk)(p.default.pathname)}),this.fetchAssistReqType()}},{key:"modalProfileImg",value:function(){return(0,J.jsx)(P.Z,{maskStyle:{WebkitAnimation:"none",MozAnimation:"none",OAnimation:"none",animation:"none",animationDuration:0,backdropFilter:"blur(2px)"},visible:this.state.previewVisible,footer:null,onCancel:this.handleCancel,children:(0,J.jsx)("img",{alt:"notfound-icon",onError:function(t){return t.target.src="".concat($.svgFolder,"/imagenotfound.webp")},style:{width:"100%"},src:this.state.previewImage})})}},{key:"checkSubmitFormRequest",value:function(){var t=this;return this.state.assist_form.length>0&&q().filter(this.state.assist_form,(function(e){return 1==e.IS_REQUIRED&&!!t.state[e.INPUT_NAME]})).length==q().filter(this.state.assist_form,{IS_REQUIRED:"1"}).length}},{key:"render",value:function(){var t=this,e=this.state;return e.statusCode>=300&&e.statusCode<500?(0,J.jsx)(h.default,{statusCode:this.state.statusCode,err:this.state.errData,showModalLogout:function(){return t.props.showModalLogout()}}):(0,J.jsx)("div",{className:"main-layout",style:{position:"relative"},children:(0,J.jsxs)("div",{style:{width:"100%"},children:[(0,J.jsx)(E.Z,{checked:!e.loading||!this.state.isInitialLoading}),(0,J.jsx)(T.default,{children:(0,J.jsx)("link",{rel:"stylesheet",href:"".concat($.cssFolder,"/assistrequest.css")})}),this.modalProfileImg(),(0,J.jsx)(Y.Z,{isOpen:this.state.isSuccessAlert,type:"success",svgIcon:"success_icon",variantIcon:"square",styleIcon:{padding:0,backgroundColor:"transparent"},styleContent:{color:"white"},title:V.Z.t("Successfully"),disableCloseBtn:!0,onClose:function(){t.setState({isSuccessAlert:!1})},onConfirm:function(){return p.default.push("/AssistRequestTrack","".concat($.prefixPath,"AssistRequestTrack"))},description:V.Z.t("SuccessfulReqWelfare")}),(0,J.jsx)("div",{className:"main-content",id:"main-content",style:{},children:(0,J.jsxs)("div",{className:"sub-content",children:[(0,J.jsx)(I.Z,{children:(0,J.jsx)(U.Z,{xs:24,sm:24,md:24,lg:24,xl:{span:16,offset:4},xxl:{span:16,offset:4},children:(0,J.jsx)(W.Z,{th:"\u0e43\u0e1a\u0e04\u0e33\u0e02\u0e2d\u0e2a\u0e27\u0e31\u0e2a\u0e14\u0e34\u0e01\u0e32\u0e23",en:"Welfare request"})})}),(0,J.jsx)(I.Z,{gutter:{xs:5,sm:5,md:5,lg:10,xl:10},children:(0,J.jsx)(U.Z,{xs:24,sm:24,md:24,lg:24,xl:{span:16,offset:4},xxl:{span:16,offset:4},children:(0,J.jsx)("div",{className:"assist-list-div",children:(0,J.jsx)(A.Z,{disabled:this.state.isConfirm,trigger:["click"],className:"assist-list-dropdown",overlay:(0,J.jsx)(L.Z,{children:this.state.assist_arr.length>0?this.state.assist_arr.map((function(e,s){return(0,J.jsx)(L.Z.Item,{onClick:function(){t.fetchAssistReqForm(e.ID_CONST_WELFARE)},children:e.WELFARE_DESC},e.ID_CONST_WELFARE)})):(0,J.jsx)(L.Z.Item,{disabled:!0,children:V.Z.t("DataNotFound")})}),children:(0,J.jsxs)(k.Z,{color:"primary",variant:q().find(this.state.assist_arr,{ID_CONST_WELFARE:this.state.assist})?"contained":"outlined",children:[q().find(this.state.assist_arr,{ID_CONST_WELFARE:this.state.assist})?q().find(this.state.assist_arr,{ID_CONST_WELFARE:this.state.assist}).WELFARE_DESC:V.Z.t("SelectAssistType"),this.state.loading_form?(0,J.jsx)(g.Z,{type:"loading",style:{marginLeft:5}}):(0,J.jsx)(g.Z,{type:"down",style:{marginLeft:5}})]})})})})}),(0,J.jsx)("div",{children:(0,J.jsx)(I.Z,{gutter:{xs:5,sm:5,md:10,lg:20,xl:20,xxl:20},type:"flex",children:(0,J.jsx)(U.Z,{xs:24,sm:24,md:24,lg:24,xl:{span:16,offset:4},xxl:{span:16,offset:4},style:{paddingBottom:"20px"},children:(0,J.jsx)("div",{className:"shadow-content",style:{backgroundColor:"white",height:"100%"},children:(0,J.jsxs)("div",{className:"assist-request-div ",children:[(0,J.jsx)("div",{children:(0,J.jsx)(x.Z,{className:"description-table",useFixedHeader:!1,bordered:!1,pagination:!1,showHeader:!1,style:{width:"100%"},dataSource:(0,n.Z)(this.state.assist_form.map((function(e,s){return{key:e.INPUT_NAME,label:(0,J.jsxs)("div",{style:{paddingBottom:"5px",textAlign:"right"},children:[e.LABEL_TEXT," ",1==e.IS_REQUIRED&&(0,J.jsx)("span",{className:"red-text",children:"*"})," ",":"]}),value:"number"==e.INPUT_TYPE?(0,J.jsx)("div",{children:(0,J.jsx)(v.Z,{value:t.state[e.INPUT_NAME],name:e.INPUT_NAME,placeholder:e.PLACEHOLDER,onChange:function(s){t.setState((0,d.Z)({},e.INPUT_NAME,s))},min:e.INPUT_LENGTH&&e.INPUT_LENGTH.split("|")[0]?parseFloat(e.INPUT_LENGTH.split("|")[0]):void 0,max:e.INPUT_LENGTH&&e.INPUT_LENGTH.split("|")[1]?parseFloat(e.INPUT_LENGTH.split("|")[1]):void 0,style:{width:"100%"},allowClear:!0,className:"input-in-form"})}):"select"==e.INPUT_TYPE?(0,J.jsx)("div",{children:(0,J.jsx)(Z.Z,{value:t.state[e.INPUT_NAME],mode:"default",style:{width:"100%"},placeholder:e.PLACEHOLDER,onChange:function(s){return t.setState((0,d.Z)({},e.INPUT_NAME,s))},className:"select-form-group",dropdownClassName:"option-select-group",children:q().map(JSON.parse(e.INPUT_FORMAT),(function(t,e,s){return(0,J.jsx)(Option,{value:e,children:t},e)}))})}):"date"==e.INPUT_TYPE?(0,J.jsx)("div",{children:(0,J.jsx)(S.Z,{format:"DD/MM/YYYY",value:t.state[e.INPUT_NAME],placeholder:e.PLACEHOLDER,name:e.INPUT_NAME,onChange:function(s){return t.setState((0,d.Z)({},e.INPUT_NAME,s))},disabledDate:function(t){return!(!e.INPUT_LENGTH||!e.INPUT_LENGTH.split("|")[0])&&t.set({hour:0,minute:0,second:0,millisecond:0})<F()(e.INPUT_LENGTH.split("|")[0]).set({hour:0,minute:0,second:0,millisecond:0})||!(!e.INPUT_LENGTH||!e.INPUT_LENGTH.split("|")[1])&&t.set({hour:0,minute:0,second:0,millisecond:0})>F()(e.INPUT_LENGTH.split("|")[1]).set({hour:0,minute:0,second:0,millisecond:0})},allowClear:!0,style:{width:"100%"},className:"input-in-form"})}):"time"==e.INPUT_TYPE?(0,J.jsx)("div",{children:(0,J.jsx)(j.Z,{value:t.state[e.INPUT_NAME],placeholder:e.PLACEHOLDER,name:e.INPUT_NAME,format:"HH.mm",onChange:function(s){return t.setState((0,d.Z)({},e.INPUT_NAME,s))},disabledHours:function(){return q().range(0,24).filter((function(t,s){return!(!e.INPUT_LENGTH||!e.INPUT_LENGTH.split("|")[0])&&t<parseInt(F()(e.INPUT_LENGTH.split("|")[0],"HH:mm").format("H"))||!(!e.INPUT_LENGTH||!e.INPUT_LENGTH.split("|")[1])&&t>parseInt(F()(e.INPUT_LENGTH.split("|")[1],"HH:mm").format("H"))}))},disabledMinutes:function(t){return q().range(0,60).filter((function(s,n){return!(!e.INPUT_LENGTH||!e.INPUT_LENGTH.split("|")[0])&&(t<=parseInt(F()(e.INPUT_LENGTH.split("|")[0],"HH:mm").format("H"))&&s<parseInt(F()(e.INPUT_LENGTH.split("|")[0],"HH:mm").format("mm")))||!(!e.INPUT_LENGTH||!e.INPUT_LENGTH.split("|")[1])&&(t>=parseInt(F()(e.INPUT_LENGTH.split("|")[1],"HH:mm").format("H"))&&s>parseInt(F()(e.INPUT_LENGTH.split("|")[1],"HH:mm").format("mm")))}))},allowClear:!0,style:{width:"100%"},className:"input-in-form"})}):"datetime"==e.INPUT_TYPE?(0,J.jsx)("div",{children:(0,J.jsx)(S.Z,{format:"DD/MM/YYYY HH.mm",value:t.state[e.INPUT_NAME],placeholder:e.PLACEHOLDER,name:e.INPUT_NAME,onChange:function(s){return t.setState((0,d.Z)({},e.INPUT_NAME,s))},disabledDate:function(t){return!(!e.INPUT_LENGTH||!e.INPUT_LENGTH.split("|")[0])&&t.set({hour:0,minute:0,second:0,millisecond:0})<F()(e.INPUT_LENGTH.split("|")[0]).set({second:0,millisecond:0})||!(!e.INPUT_LENGTH||!e.INPUT_LENGTH.split("|")[1])&&t.set({hour:0,minute:0,second:0,millisecond:0})>F()(e.INPUT_LENGTH.split("|")[1]).set({second:0,millisecond:0})},allowClear:!0,style:{width:"100%"},className:"input-in-form"})}):"radio"==e.INPUT_TYPE?(0,J.jsx)("div",{children:(0,J.jsx)(M.ZP.Group,{onChange:function(s){t.setState((0,d.Z)({},e.INPUT_NAME,s.target.value))},value:t.state[e.INPUT_NAME],placeholder:e.PLACEHOLDER,name:e.INPUT_NAME,children:q().map(JSON.parse(e.INPUT_FORMAT),(function(t,e,s){return(0,J.jsx)(M.ZP,{value:e,children:t},e)}))})}):"checkbox"==e.INPUT_TYPE?(0,J.jsx)("div",{children:(0,J.jsx)(y.Z.Group,{options:q().map(JSON.parse(e.INPUT_FORMAT),(function(t,e,s){return{label:t,value:e}})),value:t.state[e.INPUT_NAME]||[],onChange:function(s){t.setState((0,d.Z)({},e.INPUT_NAME,s))}})}):"year"==e.INPUT_TYPE?(0,J.jsx)("div",{children:(0,J.jsx)(S.Z,{mode:"year",format:"YYYY",value:t.state[e.INPUT_NAME],placeholder:e.PLACEHOLDER,name:e.INPUT_NAME,onPanelChange:function(s){t.setState((0,d.Z)({},e.INPUT_NAME,s))},allowClear:!0,style:{width:"100%"},className:"input-in-form"})}):"upload"==e.INPUT_TYPE?(0,J.jsx)("div",{children:(0,J.jsx)(H.Z,{listType:"picture-card",defaultFileList:[],fileList:t.state[e.INPUT_NAME]||[],className:"upload-list-inline",onPreview:t.handlePreview,onRemove:function(){return t.setState((0,d.Z)({},e.INPUT_NAME,[]))},showUploadList:{showDownloadIcon:!1},onChange:function(){var s=(0,a.Z)(f().mark((function s(a){var i;return f().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t.setState({isLoadingUpload:!0}),!("image/jpeg"===a.file.type||"image/png"===a.file.type)){s.next=17;break}if(i=(0,n.Z)(a.fileList),t.setState((0,d.Z)({},e.INPUT_NAME,i)),!i[0]||"done"!=i[0].status){s.next=14;break}if(i[0].url||i[0].preview){s.next=10;break}return s.next=9,K(i[0].originFileObj);case 9:i[0].preview=s.sent;case 10:t.setState({isLoadingUpload:!1}),w.Z.success("".concat(i[0].name," ").concat(V.Z.t("ImageUploadSuccess"))),s.next=15;break;case 14:i[0]&&"error"==i[0].status&&(t.setState({isLoadingUpload:!1}),w.Z.error("".concat(i[0].name," ").concat(V.Z.t("ImageUploadFailed"))));case 15:s.next=21;break;case 17:t.setState({isLoadingUpload:!1}),t.setState({fileStatus:"error"}),t.setState((0,d.Z)({},e.INPUT_NAME,[])),w.Z.error(V.Z.t("InvalidFileType"));case 21:case"end":return s.stop()}}),s)})));return function(t){return s.apply(this,arguments)}}(),children:(t.state[e.INPUT_NAME]||[]).length>0||"uploading"==t.state.fileStatus?null:(0,J.jsx)(k.Z,{children:(0,J.jsx)("div",{className:"ant-upload-text",children:V.Z.t("UpLoad")})})})}):(0,J.jsx)("div",{children:(0,J.jsx)(R.Z,{value:t.state[e.INPUT_NAME],placeholder:e.PLACEHOLDER,name:e.INPUT_NAME,maxLength:e.INPUT_LENGTH?Number(e.INPUT_LENGTH):void 0,onChange:function(s){return t.setState((0,d.Z)({},e.INPUT_NAME,s.target.value))},allowClear:!0,className:"input-in-form"})})}}))),columns:[{title:"label",dataIndex:"label",key:"label"},{title:"value",dataIndex:"value",key:"value"}]})}),(0,J.jsx)("div",{style:{textAlign:"right",paddingTop:20},children:(0,J.jsx)(k.Z,{disabled:!this.checkSubmitFormRequest(),color:"primary",variant:"contained",disableRipple:!!this.state.loadingReq,onClick:function(){return t.state.loadingReq?null:t.checkSubmitFormRequest()?t.submitFormRequest():null},endIcon:this.state.loadingReq&&(0,J.jsx)(g.Z,{type:"loading"}),children:V.Z.t("ConfirmRequest")})})]})})})})})]})})]})})}}]),s}(m.PureComponent);e.default=(0,C.$j)((function(t){return{}}),(function(t){return{}}))((0,B.hr)()(tt))},89755:function(t,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/AssistRequest",function(){return s(12190)}])}},function(t){t.O(0,[6507,5809,6253,656,3216,7206,809,8449,9774,2888,179],(function(){return e=89755,t(t.s=e);var e}));var e=t.O();_N_E=e}]);